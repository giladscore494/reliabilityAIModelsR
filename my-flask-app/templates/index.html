<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Car Reliability Analyzer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <div class="user-corner">
            {% if user.is_authenticated %}
                <span>砖, {{ user.name.split(' ')[0] if user.name else '砖转砖' }}</span>
                <a href="/dashboard" class="user-button">驻砖 砖</a>
                <a href="/logout" class="user-button logout">转转拽</a>
            {% else %}
                <a href="/login" class="user-button login">转专 注 </a>
            {% endif %}
        </div>

        <div class="header-content">
            <h1> Car Reliability Analyzer</h1>
            <p>拽转 转 专 砖专 (Gemini + Flask)</p>
        </div>
    </header>

    <main>
        {% if not user.is_authenticated %}
        <div class="login-prompt">
            <h3>专 !</h3>
            <p> 爪注 驻砖, 注 转专 注 砖 .</p>
            <a href="/login" class="user-button login" style="font-size: 1.05rem; padding: 0.7rem 1.2rem;">转专 注 </a>
        </div>

        <form id="car-form" class="hidden" aria-hidden="true">
        {% else %}
        <form id="car-form">
        {% endif %}
            <h3> 专转 专</h3>

            <div class="form-grid-3">
                <div class="form-group">
                    <label for="make">爪专:</label>
                    <select id="make" name="make" required>
                        <option value="">专 爪专...</option>
                        {% for make in car_models_data.keys()|sort %}
                            <option value="{{ make }}">{{ make }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="model">:</label>
                    <select id="model" name="model" required disabled>
                        <option value="">专 爪专 转...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="year">砖转 专:</label>
                    <select id="year" name="year" required disabled>
                        <option value="">专  转...</option>
                    </select>
                </div>
            </div>

            <h3> 驻专 住驻</h3>
            <div class="form-grid-3">
                <div class="form-group">
                    <label for="mileage_range"> 拽专':</label>
                    <select id="mileage_range" name="mileage_range">
                        <option>注 50,000 拽"</option>
                        <option>50,000 - 100,000 拽"</option>
                        <option selected>100,000 - 150,000 拽"</option>
                        <option>150,000 - 200,000 拽"</option>
                        <option>200,000+ 拽"</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fuel_type">住 拽:</label>
                    <select id="fuel_type" name="fuel_type">
                        <option selected></option>
                        <option></option>
                        <option>专</option>
                        <option>砖</option>
                        <option>专</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="transmission">转转 :</label>
                    <select id="transmission" name="transmission">
                        <option selected>转</option>
                        <option>转</option>
                    </select>
                </div>
            </div>

            <div class="form-group" style="margin-top: 1rem;">
                <label for="sub_model">转转- (驻爪):</label>
                <input type="text" id="sub_model" name="sub_model" placeholder=": 'Lounge', '1.6 专', 'GLI'">
            </div>

            <button type="submit" id="submit-button">
                <span class="button-text"> 爪注 转 转</span>
                <div class="spinner hidden" aria-hidden="true"></div>
            </button>
        </form>

        <div id="results-container" class="hidden">
            <div id="results-content"></div>
        </div>
    </main>

    <footer style="text-align: center; padding: 20px; margin-top: 50px; border-top: 1px solid #eee; font-size: 0.9em;">
        <p>
            &copy; 2025 注 专 (yedaarechev).  转 砖专转.
        </p>
        <p style="margin-top: 10px;">
            <a href="{{ url_for('privacy') }}" style="margin: 0 10px; color: #0d6efd; text-decoration: none;">转 驻专转</a> | 
            <a href="{{ url_for('terms') }}" style="margin: 0 10px; color: #0d6efd; text-decoration: none;">转拽 砖砖</a>
        </p>
    </footer>
    <script>
        const userIsAuthenticated = {{ user.is_authenticated | tojson }};
        const carModelsData = {{ car_models_data | tojson }};
    </script>
    <script src="/static/script.js"></script>
</body>
</html>
